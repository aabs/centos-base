{
	"variables": {
	},
	"builders":[ {
    "boot_command": [
			 "c",
       "linuxefi /images/pxeboot/vmlinuz inst.ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/ks.cfg<enter>",
       "initrdefi /images/pxeboot/initrd.img<enter>",
       "boot<enter>"
    ],
    "cpu": 1,
    "disk_size": 40960,
    "generation": 2,
    "http_directory": "http",
    "iso_checksum": "c455ee948e872ad2194bdddd39045b83634e8613249182b88f549bb2319d97eb",
    "iso_checksum_type": "sha256",
    "iso_url": "http://mirrors.kernel.org/centos/7.3.1611/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso",
    "ram_size": 512,
    "shutdown_command": "echo 'vagrant' | sudo -S shutdown -P now",
    "ssh_password": "vagrant",
    "ssh_timeout": "10000s",
    "ssh_username": "vagrant",
    "type": "hyperv-iso",
    "vm_name": "centos-7.3"
  },
		{
		"type": "virtualbox-iso",
		"boot_command": [
			"<tab> text ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/ks.cfg<enter><wait>"
		],
		"boot_wait": "10s",
		"disk_size": 81920,
		"guest_os_type": "RedHat_64",
		"headless": false,
		"http_directory": "http",
		"iso_urls": [
			"file:///home/aabs/dev/CentOS-7-x86_64-Minimal-1611.iso",
			"http://ftp.swin.edu.au/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1611.iso"
		],
		"iso_checksum_type": "sha256",
		"iso_checksum": "27bd866242ee058b7a5754e83d8ee8403e216b93d130d800852a96f41c34d86a",
		"ssh_username": "vagrant",
		"ssh_password": "vagrant",
		"ssh_port": 22,
		"ssh_wait_timeout": "10000s",
		"shutdown_command": "echo 'vagrant'|sudo -S /sbin/halt -h -p",
		"guest_additions_path": "VBoxGuestAdditions_{{.Version}}.iso",
		"virtualbox_version_file": ".vbox_version",
		"vm_name": "packer-centos-7-x86_64",
		"vboxmanage": [
			[
				"modifyvm",
				"{{.Name}}",
				"--memory",
				"512"
			],
			[
				"modifyvm",
				"{{.Name}}",
				"--cpus",
				"2"
			]
		]
	}
	] ,
	"provisioners":[
		{
      "type": "shell",
      "execute_command": "echo 'vagrant' | {{.Vars}} sudo -S -E bash '{{.Path}}'",
      "script": "scripts/ansible.sh"
    },
		{
		  "type": "ansible-local",
		  "playbook_file": "ansible/local.yml",
			"galaxy_file": "requirements.yml"
		}
	],
	"post-processors": [
		{
			"output": "builds/{{.Provider}}-centos7.box",
			"type": "vagrant"
		}
	]
}
